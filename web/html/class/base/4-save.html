<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../../../assets/layui/css/layui.css" rel="stylesheet">
    <link href="../../../assets/css/class/course.css" rel="stylesheet">
</head>
<body>
    <div class="course">
    <div class="course-inner">
        <div class="layui-row nav">
            <a class="nav-font-pre" href="/page_constant"><i class="layui-icon layui-icon-left"></i>C 常量</a>
            <a class="nav-font-next" href="/page_operation">C 运算符<i class="layui-icon layui-icon-right"></i></a>
        </div>
        <div class="course-main">
            <div>
                <h1>C <span class="course-main-h1">存储类</span></h1>
                <p>存储类定义 C 程序中变量/函数的范围（可见性）和生命周期。这些说明符放置在它们所修饰的类型之前。下面列出 C 程序中可用的存储类：</p>
                <ul>
                    <li>auto</li>
                    <li>register</li>
                    <li>static</li>
                    <li>extern</li>
                </ul>
                <hr class="layui-bg-gray">

                <h2>auto 存储类</h2>
                <p><b>auto</b> 存储类是所有局部变量默认的存储类。</p>
                <blockquote class="layui-elem-quote code">
                    <div class="code-div">
                        <p>{</p>
                        <p>&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;mount;</p>
                        <p>&nbsp;&nbsp;&nbsp;auto&nbsp;&nbsp;int&nbsp;&nbsp;month;</p>
                        <p>}</p>
                    </div>
                </blockquote>
                <p>上面的实例定义了两个带有相同存储类的变量，auto 只能用在函数内，即 auto 只能修饰局部变量。</p>
                <hr class="layui-bg-gray">

                <h2>register 存储类</h2>
                <p><b>register</b> 存储类用于定义存储在寄存器中而不是 RAM 中的局部变量。这意味着变量的最大尺寸等于寄存器的大小（通常是一个词），且不能对它应用一元的 '&' 运算符（因为它没有内存位置）。</p>
                <blockquote class="layui-elem-quote code">
                    <div class="code-div">
                        <p>{</p>
                        <p>&nbsp;&nbsp;&nbsp;register&nbsp;&nbsp;int&nbsp;&nbsp;miles;</p>
                        <p>}</p>
                    </div>
                </blockquote>
                <p>寄存器只用于需要快速访问的变量，比如计数器。还应注意的是，定义 'register' 并不意味着变量将被存储在寄存器中，它意味着变量可能存储在寄存器中，这取决于硬件和实现的限制。</p>
                <hr class="layui-bg-gray">

                <h2>static 存储类</h2>
                <p><b>static</b> 存储类指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。因此，使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。</p>
                <p>static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。</p>
                <p>全局声明的一个 static 变量或方法可以被任何函数或方法调用，只要这些方法出现在跟 static 变量或方法同一个文件中。</p>
                <p>以下实例演示了 static 修饰全局变量和局部变量的应用：</p>
                <blockquote class="layui-elem-quote code">
                    <p style="color:#617f10;">实例</p>
                    <hr class="layui-bg-cyan">
                    <div class="code-div">
                        <p>#include &nbsp;<span class="code-brown">&lt;stdio.h></span></p>
                        <p>/* 函数声明 */</p>
                        <p>void&nbsp;&nbsp;<span class="code-blue">func1</span>(void);</p>
                        <p>static&nbsp;&nbsp;int&nbsp;&nbsp;<span class="code-blue">count</span>=<span class="code-violet">10</span>;&nbsp;&nbsp;&nbsp;&nbsp;/* 全局变量 - static 是默认的 */</p>
                        <p>int <span class="code-blue">main</span>()</p>
                        <p>{</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-green">while</span>&nbsp;&nbsp;(<span class="code-blue">count</span>--)&nbsp;&nbsp;{</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-blue">func1</span>();</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;}</p>
                        <p><span class="code-green">return</span> <span class="code-brown">0</span>;</p>
                        <p>}</p>
                    </div>
                </blockquote>
                <p>实例中 count 作为全局变量可以在函数内使用，thingy 使用 static 修饰后，不会在每次调用时重置。</p>
                <p>可能您现在还无法理解这个实例，因为我已经使用了函数和全局变量，这两个概念目前为止还没进行讲解。即使您现在不能完全理解，也没有关系，后续的章节我们会详细讲解。当上面的代码被编译和执行时，它会产生下列结果：</p>
                <hr class="layui-bg-gray">

                <h2>extern 存储类</h2>
                <p><b>extern</b> 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当您使用 </p>
                <p>当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 <i>extern</i> 来得到已定义的变量或函数的引用。可以这么理解，<i>extern</i> 是用来在另一个文件中声明一个全局变量或函数。</p>
                <p>extern 修饰符通常用于当有两个或多个文件共享相同的全局变量或函数的时候，如下所示：</p>
                <p><b>第一个文件：main.c</b></p>
                <blockquote class="layui-elem-quote code">
                    <p style="color:#617f10;">实例</p>
                    <hr class="layui-bg-cyan">
                    <div class="code-div">
                        <p>#include &nbsp;<span class="code-brown">&lt;stdio.h></span></p>
                        <p>int&nbsp;&nbsp;<span class="code-blue">count</span>;</p>
                        <p>extern&nbsp;&nbsp;void&nbsp;&nbsp;<span class="code-blue">write_extern</span>();</p>
                        <p>int <span class="code-blue">main</span>()</p>
                        <p>{</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-blue">count</span>&nbsp;&nbsp;=<span class="code-violet">5</span>;</p>
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-blue">write_extern</span>();</p>
                        <p>}</p>
                    </div>
                </blockquote>
            </div>
        </div>
        <div class="layui-row nav">
            <a class="nav-font-pre" href="/page_constant"><i class="layui-icon layui-icon-left"></i>C 常量</a>
            <a class="nav-font-next" href="/page_operation">C 运算符<i class="layui-icon layui-icon-right"></i></a>
        </div>
    </div>
</div>
    <!--        笔记栏目-->
    <div class="note" id="9">
        <div class="layui-btn layui-btn-warm note-info" style="float:left;">查看笔记&nbsp;&nbsp;<i class="layui-icon layui-icon-read"></i></div>
        <div class="layui-btn layui-btn-warm note-add" style="float:right;">写笔记&nbsp;&nbsp;<i class="layui-icon layui-icon-note"></i></div>
    </div>

    <script src="../../../assets/layui/layui.js"></script>
    <script src="../../../assets/js/class/course.js"></script>
</body>
</html>