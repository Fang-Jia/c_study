<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../../../assets/layui/css/layui.css" rel="stylesheet">
    <link href="../../../assets/css/class/course.css" rel="stylesheet">
</head>
<body>
    <div class="course">
        <div class="course-inner">
            <div class="layui-row nav">
                <a class="nav-font-pre" href="/page_construction"><i class="layui-icon layui-icon-left"></i>C 结构体</a>
                <a class="nav-font-next" href="/page_place">C 位域<i class="layui-icon layui-icon-right"></i></a>
            </div>
            <div class="course-main">
                <div>
                    <h1>C <span class="course-main-h1">共用体</span></h1>
                    <p><b>共用体</b>是一种特殊的数据类型，允许您在相同的内存位置存储不同的数据类型。您可以定义一个带有多成员的共用体，但是任何时候只能有一个成员带有值。共用体提供了一种使用相同的内存位置的有效方式。</p>
                    <hr class="layui-bg-gray">

                    <h2>定义共用体</h2>
                    <p>为了定义共用体，您必须使用 <b>union</b> 语句，方式与定义结构类似。union 语句定义了一个新的数据类型，带有多个成员。union 语句的格式如下：</p>
                    <blockquote class="layui-elem-quote code">
                        <div class="code-div">
                            <p>union [union <span class="code-blue">tag</span>]</p>
                            <p>{</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-blue">member definition</span>;</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-blue">member definition</span>;</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;. . .</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-blue">member definition</span>;</p>
                            <p>} [one or more union variables];</p>
                        </div>
                    </blockquote>
                    <p><b>union tag</b> 是可选的，每个 member definition 是标准的变量定义，比如 int i; 或者 float f; 或者其他有效的变量定义。在共用体定义的末尾，最后一个分号之前，您可以指定一个或多个共用体变量，这是可选的。下面定义一个名为 Data 的共用体类型，有三个成员 i、f 和 str：</p>
                    <blockquote class="layui-elem-quote code">
                        <div class="code-div">
                            <p>union <span class="code-blue">Data</span></p>
                            <p>{</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;<span class="code-blue">i</span>;</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;<span class="code-blue">f</span>;</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;<span class="code-blue">str</span>[<span class="code-violet">20</span>];</p>
                            <p>} <span class="code-blue">data</span></p>
                        </div>
                    </blockquote>
                    <p>现在，<b>Data</b> 类型的变量可以存储一个整数、一个浮点数，或者一个字符串。这意味着一个变量（相同的内存位置）可以存储多个多种类型的数据。您可以根据需要在一个共用体内使用任何内置的或者用户自定义的数据类型。</p>
                    <p>共用体占用的内存应足够存储共用体中最大的成员。例如，在上面的实例中，Data 将占用 20 个字节的内存空间，因为在各个成员中，字符串所占用的空间是最大的。下面的实例将显示上面的共用体占用的总内存大小：</p>
                    <blockquote class="layui-elem-quote code">
                        <p style="color:#617f10;">实例</p>
                        <hr class="layui-bg-cyan">
                        <div class="code-div">
                            <p>#include &nbsp;<span class="code-brown">&lt;stdio.h></span></p>
                            <p>#include &nbsp;<span class="code-brown">&lt;string.h></span></p>
                            <p>union <span class="code-blue">Data</span></p>
                            <p>{</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;&nbsp;<span class="code-blue">i</span>;</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;<span class="code-blue">f</span>;</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;<span class="code-blue">str</span>[<span class="code-violet">20</span>];</p>
                            <p>};</p>
                            <p>int <span class="code-blue">main</span>()</p>
                            <p>{</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;union <span class="code-blue">Data&nbsp;&nbsp;data</span></p>
                            <p><span class="code-blue">printf</span>(<span class="code-brown">"Memory size occupied by data : %d\n"</span>,&nbsp;&nbsp;<span class="code-green">sizeof</span>(<span class="code-blue">data</span>));</p>
                            <p>&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-green">return</span> <span class="code-brown">0</span>;</p>
                            <p>}</p>
                        </div>
                    </blockquote>
                    <p>当上面的代码被编译和执行时，它会产生下列结果：</p>
                    <blockquote class="layui-elem-quote code">
                        <div class="code-div">
                            <p>Memory size occupied by data : 20</p>
                        </div>
                    </blockquote>
                    <hr class="layui-bg-gray">

                    <h2>访问共用体成员</h2>
                    <p>为了访问共用体的成员，我们使用<b>成员访问运算符（.）</b>。成员访问运算符是共用体变量名称和我们要访问的共用体成员之间的一个句号。您可以使用 <b>union</b> 关键字来定义共用体类型的变量。下面的实例演示了共用体的用法：</p>

                </div>
            </div>
            <div class="layui-row nav">
                <a class="nav-font-pre" href="/page_construction"><i class="layui-icon layui-icon-left"></i>C 结构体</a>
                <a class="nav-font-next" href="/page_place">C 位域<i class="layui-icon layui-icon-right"></i></a>
            </div>
        </div>
    </div>
    <!--        笔记栏目-->
    <div class="note" id="21">
        <div class="layui-btn layui-btn-warm note-info" style="float:left;">查看笔记&nbsp;&nbsp;<i class="layui-icon layui-icon-read"></i></div>
        <div class="layui-btn layui-btn-warm note-add" style="float:right;">写笔记&nbsp;&nbsp;<i class="layui-icon layui-icon-note"></i></div>
    </div>

    <script src="../../../assets/layui/layui.js"></script>
    <script src="../../../assets/js/class/course.js"></script>
</body>
</html>